(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3084:(e,t,r)=>{Promise.resolve().then(r.bind(r,5112))},5112:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r(5155),n=r(2115),l=r(2317),i=r(1027),s=r(3463),o=r(9795);function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,s.$)(t))}let u=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:s=!1,...o}=e,d=s?l.DX:"button";return(0,a.jsx)(d,{className:c(u({variant:n,size:i,className:r})),ref:t,...o})});d.displayName="Button";var h=r(2252);let g=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsxs)(h.bL,{ref:t,className:c("relative flex w-full touch-none select-none items-center",r),...n,children:[(0,a.jsx)(h.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(h.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(h.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});g.displayName=h.bL.displayName;var f=r(872),v=r(4085),b=r(1406),x=r(3565),m=r(257),p=r(3243),w=r(2921),y=r(5686);function k(){let e=(0,n.useRef)(null),t=(0,n.useRef)(null),[r,l]=(0,n.useState)("pencil"),[i,s]=(0,n.useState)(!1),[o,c]=(0,n.useState)({x:0,y:0}),[u,h]=(0,n.useState)("#000000"),[k,j]=(0,n.useState)(2),[N,C]=(0,n.useState)([]),[D,z]=(0,n.useState)([]),S=(0,n.useCallback)(()=>{let r=e.current,a=t.current;if(!r||!a)return;let n=a.getImageData(0,0,4096,4096);C(e=>[...e,{imageData:n}]),z([])},[]),M=(0,n.useCallback)(()=>{let r=e.current;if(!r)return;r.width=4096,r.height=4096;let a=r.getContext("2d");a&&(a.lineCap="round",a.strokeStyle=u,a.lineWidth=k,t.current=a,0===N.length?(a.fillStyle="white",a.fillRect(0,0,4096,4096),S()):a.putImageData(N[N.length-1].imageData,0,0))},[u,k,S,N]);(0,n.useEffect)(()=>{M()},[M]);let A=(0,n.useCallback)(t=>{let r=e.current;if(!r)return{x:0,y:0};let a=r.getBoundingClientRect(),n="touches"in t?t.touches[0].clientX:t.clientX,l="touches"in t?t.touches[0].clientY:t.clientY;return{x:(n-a.left)*(4096/a.width),y:(l-a.top)*(4096/a.height)}},[]),_=(0,n.useCallback)(e=>{let a=A(e);if(s(!0),c(a),"pencil"===r||"eraser"===r){var n,l;null===(n=t.current)||void 0===n||n.beginPath(),null===(l=t.current)||void 0===l||l.moveTo(a.x,a.y)}},[A,r]),I=(0,n.useCallback)(e=>{if(!i||!t.current)return;let a=A(e),n=t.current;switch(n.strokeStyle="eraser"===r?"white":u,n.lineWidth=k,r){case"pencil":case"eraser":n.lineTo(a.x,a.y),n.stroke();break;case"line":n.putImageData(N[N.length-1].imageData,0,0),n.beginPath(),n.moveTo(o.x,o.y),n.lineTo(a.x,a.y),n.stroke();break;case"rectangle":n.putImageData(N[N.length-1].imageData,0,0),n.beginPath(),n.rect(o.x,o.y,a.x-o.x,a.y-o.y),n.stroke();break;case"circle":n.putImageData(N[N.length-1].imageData,0,0),n.beginPath();let l=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2));n.arc(o.x,o.y,l,0,2*Math.PI),n.stroke()}},[u,A,i,k,o,r,N]),P=(0,n.useCallback)(()=>{var e;i&&S(),s(!1),null===(e=t.current)||void 0===e||e.beginPath()},[i,S]),R=(0,n.useCallback)(()=>{if(N.length<=1)return;let r=e.current,a=t.current;if(!r||!a)return;let n=N[N.length-1],l=N[N.length-2];z(e=>[...e,n]),C(e=>e.slice(0,-1)),a.putImageData(l.imageData,0,0)},[N]),T=(0,n.useCallback)(()=>{if(0===D.length)return;let r=e.current,a=t.current;if(!r||!a)return;let n=D[D.length-1];C(e=>[...e,n]),z(e=>e.slice(0,-1)),a.putImageData(n.imageData,0,0)},[D]),E=(0,n.useCallback)(()=>{let r=e.current,a=t.current;r&&a&&(a.fillStyle="white",a.fillRect(0,0,4096,4096),S())},[S]);return(0,a.jsxs)("div",{className:"relative w-full h-full overflow-hidden bg-gray-100",children:[(0,a.jsxs)("div",{className:"fixed top-4 right-4 flex flex-wrap gap-2 bg-white p-2 rounded-lg shadow-md z-10 max-w-[calc(100%-80px)]",children:[(0,a.jsx)(d,{variant:"pencil"===r?"default":"outline",size:"icon",onClick:()=>l("pencil"),children:(0,a.jsx)(f.A,{className:"h-4 w-4"})}),(0,a.jsx)(d,{variant:"line"===r?"default":"outline",size:"icon",onClick:()=>l("line"),children:(0,a.jsx)(v.A,{className:"h-4 w-4"})}),(0,a.jsx)(d,{variant:"rectangle"===r?"default":"outline",size:"icon",onClick:()=>l("rectangle"),children:(0,a.jsx)(b.A,{className:"h-4 w-4"})}),(0,a.jsx)(d,{variant:"circle"===r?"default":"outline",size:"icon",onClick:()=>l("circle"),children:(0,a.jsx)(x.A,{className:"h-4 w-4"})}),(0,a.jsx)(d,{variant:"eraser"===r?"default":"outline",size:"icon",onClick:()=>l("eraser"),children:(0,a.jsx)(m.A,{className:"h-4 w-4"})}),(0,a.jsx)(d,{variant:"outline",size:"icon",onClick:R,disabled:N.length<=1,children:(0,a.jsx)(p.A,{className:"h-4 w-4"})}),(0,a.jsx)(d,{variant:"outline",size:"icon",onClick:T,disabled:0===D.length,children:(0,a.jsx)(w.A,{className:"h-4 w-4"})}),(0,a.jsx)(d,{variant:"outline",size:"icon",onClick:E,children:(0,a.jsx)(y.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden border-2 border-gray-300",children:(0,a.jsx)("input",{type:"color",value:u,onChange:e=>h(e.target.value),className:"w-10 h-10 transform -translate-x-1 -translate-y-1 cursor-pointer"})}),("pencil"===r||"line"===r||"eraser"===r||"rectangle"===r||"circle"===r)&&(0,a.jsx)("div",{className:"flex items-center gap-2 ml-2",children:(0,a.jsx)(g,{value:[k],onValueChange:e=>j(e[0]),min:1,max:50,step:1,className:"w-32"})})]}),(0,a.jsx)("div",{className:"w-full h-full overflow-auto",style:{cursor:"eraser"===r?"crosshair":"default"},children:(0,a.jsx)("canvas",{ref:e,className:"touch-none",onMouseDown:_,onMouseMove:I,onMouseUp:P,onMouseLeave:P,onTouchStart:_,onTouchMove:I,onTouchEnd:P})})]})}function j(){return(0,a.jsx)("div",{className:"w-screen h-screen overflow-hidden bg-gradient-to-br from-gray-100 to-white",children:(0,a.jsx)(k,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[871,441,517,358],()=>t(3084)),_N_E=e.O()}]);